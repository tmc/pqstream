// Code generated by protoc-gen-go.
// source: pqstream.proto
// DO NOT EDIT!

/*
Package pqs is a generated protocol buffer package.

It is generated from these files:
	pqstream.proto

It has these top-level messages:
	ListenRequest
	Event
*/
package pqs

import proto "github.com/golang/protobuf/proto"
import fmt "fmt"
import math "math"
import google_protobuf "github.com/golang/protobuf/ptypes/struct"

import (
	context "golang.org/x/net/context"
	grpc "google.golang.org/grpc"
)

// Reference imports to suppress errors if they are not otherwise used.
var _ = proto.Marshal
var _ = fmt.Errorf
var _ = math.Inf

// This is a compile-time assertion to ensure that this generated file
// is compatible with the proto package it is being compiled against.
// A compilation error at this line likely means your copy of the
// proto package needs to be updated.
const _ = proto.ProtoPackageIsVersion2 // please upgrade the proto package

// An operation in the database.
type Operation int32

const (
	Operation_UNKNOWN  Operation = 0
	Operation_INSERT   Operation = 1
	Operation_UPDATE   Operation = 2
	Operation_DELETE   Operation = 3
	Operation_TRUNCATE Operation = 4
)

var Operation_name = map[int32]string{
	0: "UNKNOWN",
	1: "INSERT",
	2: "UPDATE",
	3: "DELETE",
	4: "TRUNCATE",
}
var Operation_value = map[string]int32{
	"UNKNOWN":  0,
	"INSERT":   1,
	"UPDATE":   2,
	"DELETE":   3,
	"TRUNCATE": 4,
}

func (x Operation) String() string {
	return proto.EnumName(Operation_name, int32(x))
}
func (Operation) EnumDescriptor() ([]byte, []int) { return fileDescriptor0, []int{0} }

// A request to listen to database event streams.
type ListenRequest struct {
	// if provided, this string will be used to match table names to track.
	TableRegexp string `protobuf:"bytes,1,opt,name=table_regexp,json=tableRegexp" json:"table_regexp,omitempty"`
}

func (m *ListenRequest) Reset()                    { *m = ListenRequest{} }
func (m *ListenRequest) String() string            { return proto.CompactTextString(m) }
func (*ListenRequest) ProtoMessage()               {}
func (*ListenRequest) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{0} }

func (m *ListenRequest) GetTableRegexp() string {
	if m != nil {
		return m.TableRegexp
	}
	return ""
}

// A database event.
type Event struct {
	Schema string    `protobuf:"bytes,1,opt,name=schema" json:"schema,omitempty"`
	Table  string    `protobuf:"bytes,2,opt,name=table" json:"table,omitempty"`
	Op     Operation `protobuf:"varint,3,opt,name=op,enum=pqs.Operation" json:"op,omitempty"`
	// if the id column exists, this will populate it
	Id string `protobuf:"bytes,4,opt,name=id" json:"id,omitempty"`
	// payload is a json encoded representation of the changed object.
	Payload *google_protobuf.Struct `protobuf:"bytes,5,opt,name=payload" json:"payload,omitempty"`
	// patch is, in the event of op==UPDATE an RFC7386 JSON merge patch.
	Patch *google_protobuf.Struct `protobuf:"bytes,6,opt,name=patch" json:"patch,omitempty"`
}

func (m *Event) Reset()                    { *m = Event{} }
func (m *Event) String() string            { return proto.CompactTextString(m) }
func (*Event) ProtoMessage()               {}
func (*Event) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{1} }

func (m *Event) GetSchema() string {
	if m != nil {
		return m.Schema
	}
	return ""
}

func (m *Event) GetTable() string {
	if m != nil {
		return m.Table
	}
	return ""
}

func (m *Event) GetOp() Operation {
	if m != nil {
		return m.Op
	}
	return Operation_UNKNOWN
}

func (m *Event) GetId() string {
	if m != nil {
		return m.Id
	}
	return ""
}

func (m *Event) GetPayload() *google_protobuf.Struct {
	if m != nil {
		return m.Payload
	}
	return nil
}

func (m *Event) GetPatch() *google_protobuf.Struct {
	if m != nil {
		return m.Patch
	}
	return nil
}

func init() {
	proto.RegisterType((*ListenRequest)(nil), "pqs.ListenRequest")
	proto.RegisterType((*Event)(nil), "pqs.Event")
	proto.RegisterEnum("pqs.Operation", Operation_name, Operation_value)
}

// Reference imports to suppress errors if they are not otherwise used.
var _ context.Context
var _ grpc.ClientConn

// This is a compile-time assertion to ensure that this generated file
// is compatible with the grpc package it is being compiled against.
const _ = grpc.SupportPackageIsVersion4

// Client API for PQStream service

type PQStreamClient interface {
	// Listen responds with a stream of database operations.
	Listen(ctx context.Context, in *ListenRequest, opts ...grpc.CallOption) (PQStream_ListenClient, error)
}

type pQStreamClient struct {
	cc *grpc.ClientConn
}

func NewPQStreamClient(cc *grpc.ClientConn) PQStreamClient {
	return &pQStreamClient{cc}
}

func (c *pQStreamClient) Listen(ctx context.Context, in *ListenRequest, opts ...grpc.CallOption) (PQStream_ListenClient, error) {
	stream, err := grpc.NewClientStream(ctx, &_PQStream_serviceDesc.Streams[0], c.cc, "/pqs.PQStream/Listen", opts...)
	if err != nil {
		return nil, err
	}
	x := &pQStreamListenClient{stream}
	if err := x.ClientStream.SendMsg(in); err != nil {
		return nil, err
	}
	if err := x.ClientStream.CloseSend(); err != nil {
		return nil, err
	}
	return x, nil
}

type PQStream_ListenClient interface {
	Recv() (*Event, error)
	grpc.ClientStream
}

type pQStreamListenClient struct {
	grpc.ClientStream
}

func (x *pQStreamListenClient) Recv() (*Event, error) {
	m := new(Event)
	if err := x.ClientStream.RecvMsg(m); err != nil {
		return nil, err
	}
	return m, nil
}

// Server API for PQStream service

type PQStreamServer interface {
	// Listen responds with a stream of database operations.
	Listen(*ListenRequest, PQStream_ListenServer) error
}

func RegisterPQStreamServer(s *grpc.Server, srv PQStreamServer) {
	s.RegisterService(&_PQStream_serviceDesc, srv)
}

func _PQStream_Listen_Handler(srv interface{}, stream grpc.ServerStream) error {
	m := new(ListenRequest)
	if err := stream.RecvMsg(m); err != nil {
		return err
	}
	return srv.(PQStreamServer).Listen(m, &pQStreamListenServer{stream})
}

type PQStream_ListenServer interface {
	Send(*Event) error
	grpc.ServerStream
}

type pQStreamListenServer struct {
	grpc.ServerStream
}

func (x *pQStreamListenServer) Send(m *Event) error {
	return x.ServerStream.SendMsg(m)
}

var _PQStream_serviceDesc = grpc.ServiceDesc{
	ServiceName: "pqs.PQStream",
	HandlerType: (*PQStreamServer)(nil),
	Methods:     []grpc.MethodDesc{},
	Streams: []grpc.StreamDesc{
		{
			StreamName:    "Listen",
			Handler:       _PQStream_Listen_Handler,
			ServerStreams: true,
		},
	},
	Metadata: "pqstream.proto",
}

func init() { proto.RegisterFile("pqstream.proto", fileDescriptor0) }

var fileDescriptor0 = []byte{
	// 343 bytes of a gzipped FileDescriptorProto
	0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0x7c, 0x51, 0xc1, 0x4e, 0xc2, 0x40,
	0x14, 0xa4, 0x85, 0x16, 0x78, 0x60, 0xd3, 0x6c, 0x8c, 0x36, 0x1c, 0x0c, 0x72, 0x22, 0x46, 0x5b,
	0xad, 0x31, 0xf1, 0x6a, 0xa4, 0x07, 0x95, 0x14, 0x2c, 0x25, 0x1e, 0xcd, 0xb6, 0xac, 0xa5, 0x49,
	0xe9, 0x6e, 0xbb, 0x5b, 0x23, 0x5f, 0xe8, 0x6f, 0x19, 0xb6, 0x60, 0xe2, 0xc5, 0xd3, 0xbe, 0x37,
	0x6f, 0x26, 0x99, 0x99, 0x05, 0x83, 0x15, 0x5c, 0x94, 0x04, 0x6f, 0x6c, 0x56, 0x52, 0x41, 0x51,
	0x93, 0x15, 0x7c, 0x70, 0x97, 0xa4, 0x62, 0x5d, 0x45, 0x76, 0x4c, 0x37, 0x4e, 0x42, 0x33, 0x9c,
	0x27, 0x8e, 0xbc, 0x46, 0xd5, 0x87, 0xc3, 0xc4, 0x96, 0x11, 0xee, 0x70, 0x51, 0x56, 0xb1, 0xd8,
	0x3f, 0xb5, 0x76, 0xe4, 0xc2, 0xd1, 0x34, 0xe5, 0x82, 0xe4, 0x01, 0x29, 0x2a, 0xc2, 0x05, 0x3a,
	0x87, 0xbe, 0xc0, 0x51, 0x46, 0xde, 0x4b, 0x92, 0x90, 0x2f, 0x66, 0x29, 0x43, 0x65, 0xdc, 0x0d,
	0x7a, 0x12, 0x0b, 0x24, 0x34, 0xfa, 0x56, 0x40, 0xf3, 0x3e, 0x49, 0x2e, 0xd0, 0x09, 0xe8, 0x3c,
	0x5e, 0x93, 0x0d, 0xde, 0xd3, 0xf6, 0x1b, 0x3a, 0x06, 0x4d, 0x0a, 0x2c, 0x55, 0xc2, 0xf5, 0x82,
	0xce, 0x40, 0xa5, 0xcc, 0x6a, 0x0e, 0x95, 0xb1, 0xe1, 0x1a, 0x36, 0x2b, 0xb8, 0x3d, 0x63, 0xa4,
	0xc4, 0x22, 0xa5, 0x79, 0xa0, 0x52, 0x86, 0x0c, 0x50, 0xd3, 0x95, 0xd5, 0x92, 0x12, 0x35, 0x5d,
	0xa1, 0x1b, 0x68, 0x33, 0xbc, 0xcd, 0x28, 0x5e, 0x59, 0xda, 0x50, 0x19, 0xf7, 0xdc, 0x53, 0x3b,
	0xa1, 0x34, 0xc9, 0x88, 0x7d, 0x48, 0x66, 0x2f, 0x64, 0x96, 0xe0, 0xc0, 0x43, 0x57, 0xa0, 0x31,
	0x2c, 0xe2, 0xb5, 0xa5, 0xff, 0x2f, 0xa8, 0x59, 0x17, 0xcf, 0xd0, 0xfd, 0xb5, 0x80, 0x7a, 0xd0,
	0x5e, 0xfa, 0x2f, 0xfe, 0xec, 0xcd, 0x37, 0x1b, 0x08, 0x40, 0x7f, 0xf2, 0x17, 0x5e, 0x10, 0x9a,
	0xca, 0x6e, 0x5e, 0xce, 0x27, 0x0f, 0xa1, 0x67, 0xaa, 0xbb, 0x79, 0xe2, 0x4d, 0xbd, 0xd0, 0x33,
	0x9b, 0xa8, 0x0f, 0x9d, 0x30, 0x58, 0xfa, 0x8f, 0xbb, 0x4b, 0xcb, 0xbd, 0x87, 0xce, 0xfc, 0x75,
	0x21, 0xff, 0x05, 0x5d, 0x82, 0x5e, 0xb7, 0x8a, 0x90, 0xcc, 0xf9, 0xa7, 0xe2, 0x01, 0x48, 0x4c,
	0x36, 0x38, 0x6a, 0x5c, 0x2b, 0x91, 0x2e, 0xdd, 0xdd, 0xfe, 0x04, 0x00, 0x00, 0xff, 0xff, 0xbd,
	0x94, 0x60, 0xd5, 0xd8, 0x01, 0x00, 0x00,
}
